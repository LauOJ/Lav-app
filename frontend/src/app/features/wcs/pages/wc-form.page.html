<h2>{{ isEditMode() ? 'Editar WC' : 'Crear nuevo WC' }}</h2>

<button [routerLink]="['/wcs']">← Volver a lista</button>

<br /><br />

<form (submit)="onSubmit(); $event.preventDefault()">
  <div>
    <label>
      Nombre del lugar *<br />
      <input
        type="text"
        [value]="form().name"
        (input)="updateName($any($event.target).value)"
        placeholder="Ej.: Biblioteca Jaume Fuster, Bar La Perla, Estación de Sants"
        required
      />
    </label>
  </div>

  <br />

  <div>
    <label>
      Latitud *<br />
      <input
        type="number"
        step="any"
        [value]="form().latitude"
        (input)="updateLatitude($any($event.target).valueAsNumber)"
        required
      />
    </label>
  </div>

  <br />

  <div>
    <label>
      Longitud *<br />
      <input
        type="number"
        step="any"
        [value]="form().longitude"
        (input)="updateLongitude($any($event.target).valueAsNumber)"
        required
      />
    </label>
  </div>

  <br />

  <div>
    <label>
      <input
        type="checkbox"
        [checked]="form().accessible"
        (change)="toggleFlag('accessible', $any($event.target).checked)"
      />
      Accesible
    </label>
  </div>

  <br />

  <div>
    <label>
      <input
        type="checkbox"
        [checked]="form().gender_neutral"
        (change)="toggleFlag('gender_neutral', $any($event.target).checked)"
      />
      Baño neutral
    </label>
  </div>

  <br />

  <div>
    <label>
      <input
        type="checkbox"
        [checked]="form().has_changing_table"
        (change)="toggleFlag('has_changing_table', $any($event.target).checked)"
      />
      Cambiador
    </label>
  </div>

  <br />

  <div>
    <label>
      <input
        type="checkbox"
        [checked]="form().only_for_customers"
        (change)="toggleFlag('only_for_customers', $any($event.target).checked)"
      />
      Solo para clientes
    </label>
  </div>

  <br />

  <div>
    <label>
      <input
        type="checkbox"
        [checked]="form().has_intimate_hygiene_products"
        (change)="toggleFlag('has_intimate_hygiene_products', $any($event.target).checked)"
      />
      Productos de higiene íntima
    </label>
  </div>

  <br />

  <div>
    <label>
      Descripción<br />
      <textarea
        [value]="form().description || ''"
        (input)="updateDescription($any($event.target).value)"
      ></textarea>
    </label>
  </div>

  <br />

  <button type="submit" [disabled]="loading() || loadingWc()">
    @if (isEditMode()) {
      {{ loading() ? 'Guardando…' : 'Guardar cambios' }}
    } @else {
      {{ loading() ? 'Creando…' : 'Crear WC' }}
    }
  </button>

  @if (error()) {
    <p style="color: red;">{{ error() }}</p>
  }
</form>
