<div class="page-container">
  @if (wc()) {
    <h2 class="page-title">{{ wc()?.name }}</h2>

    <div class="actions">
      <button class="btn btn-secondary" [routerLink]="['/explore']">← Volver al mapa</button>
      @if (userState.user()) {
        <a class="btn btn-secondary" [routerLink]="['/wcs', wc()!.id, 'edit']">Editar WC</a>
        <button type="button" class="btn btn-primary" (click)="onToggleFavorite()">
          {{ isFavorite() ? '★ En favoritos' : '☆ Añadir a favoritos' }}
        </button>
      }
      @if (!hasUserReviewed()) {
        <a class="btn btn-primary" [routerLink]="['/wcs', wc()!.id, 'reviews', 'new']">
          Añadir review
        </a>
      }
    </div>

    @if (favoriteError()) {
      <p>{{ favoriteError() }}</p>
    }

    <div class="section">
      <ul>
        <li>Accesible: {{ wc()?.accessible ? 'Sí' : 'No' }}</li>
        <li>Neutral: {{ wc()?.gender_neutral ? 'Sí' : 'No' }}</li>
        <li>Cambiador: {{ wc()?.has_changing_table ? 'Sí' : 'No' }}</li>
        <li>Solo clientes: {{ wc()?.only_for_customers ? 'Sí' : 'No' }}</li>
      </ul>
    </div>

    @if (wc()?.description) {
      <div class="section">
        <p>{{ wc()?.description }}</p>
      </div>
    }

    @if (hasUserReviewed()) {
      <p><em>Ya has dejado una review para este WC.</em></p>
    }

    @if (safeSpaceSummaryMessage()) {
      <p class="wc-safe-space-summary">
        {{ safeSpaceSummaryMessage() }}
      </p>
    }

    <div class="section">
      <app-review-list
        [reviews]="sortedReviews()"
        [currentUser]="userState.user()"
        (deleted)="onReviewDeleted()"
        (updated)="onReviewUpdated()"
      />
    </div>
  } @else {
    <p>Cargando WC…</p>
  }
</div>