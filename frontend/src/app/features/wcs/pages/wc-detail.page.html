<div class="page-container">
  @if (wc()) {
    <button [routerLink]="['/explore']">← Volver al mapa</button>

    <h2 class="page-title">{{ wc()?.name }}</h2>

    @if (userState.user()) {
      <a [routerLink]="['/wcs', wc()!.id, 'edit']">Editar WC</a>
      <button type="button" (click)="onToggleFavorite()">
        {{ isFavorite() ? '★ En favoritos' : '☆ Añadir a favoritos' }}
      </button>
    }

    @if (favoriteError()) {
      <p>{{ favoriteError() }}</p>
    }

    <div class="section">
      <ul>
        <li>Accesible: {{ wc()?.accessible ? 'Sí' : 'No' }}</li>
        <li>Neutral: {{ wc()?.gender_neutral ? 'Sí' : 'No' }}</li>
        <li>Cambiador: {{ wc()?.has_changing_table ? 'Sí' : 'No' }}</li>
        <li>Solo clientes: {{ wc()?.only_for_customers ? 'Sí' : 'No' }}</li>
      </ul>
    </div>
  
    @if (wc()?.description) {
      <p>
        {{ wc()?.description }}
      </p>
    }
  
    @if (!hasUserReviewed()) {
      <a [routerLink]="['/wcs', wc()!.id, 'reviews', 'new']">
        Añadir review
      </a>
    } @else {
      <p><em>Ya has dejado una review para este WC.</em></p>
    }

    @if (safeSpaceSummaryMessage()) {
      <p class="wc-safe-space-summary">
        {{ safeSpaceSummaryMessage() }}
      </p>
    }

    <div class="section">
      <app-review-list
        [reviews]="sortedReviews()"
        [currentUser]="userState.user()"
        (deleted)="onReviewDeleted()"
        (updated)="onReviewUpdated()"
      />
    </div>
  } @else {
    <p>Cargando WC…</p>
  }
</div>